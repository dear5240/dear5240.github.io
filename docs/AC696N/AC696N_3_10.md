# 10. 新Tools的音效调试使用

## 10.1. EQ工具安装

### 10.1.1. 从网站下载

[工具最新版本 — JL Project Documentation](https://doc.zh-jieli.com/Tools/zh-cn/other_info/index.html)

![img198](/pic/198.png)

用管理者点击安装pkgman-offline-setup-xxx.exe此软件（中间可能会有未识别软件风险提示，仍要安装  即可）。

默认安装在C盘。一直next>  即可。

![img199](/pic/199.png)



### 10.1.2. 启动程序

**对应软件图标**

![img200](/pic/200.png)

打开界面总的工具界面。经历这个步骤，整安装过程已经完毕。

**有两种打开软件方式：**

**第一种：**可以从如下界面的efftool打开EQ工具，一般这个是音效调试人员非程序开发者习惯使用；

![img201](/pic/201.png)

新二代音效调音的入口都是ATK

![img202](/pic/202.png)

696 的sdk调音的入口选EQ

![img203](/pic/203.png)

**第二种：**可以从SDK开发包中打开，这个是程序开发人员习惯性使用。



## 10.2. 在线音效（eq、混响等）调试

### 10.2.1. 程序上的修改

**AC696X在线调音**

- 关闭usb功能

  ![img204](/pic/204.png)

- 打开在线调试宏、选择在线调试通讯方式

  ![img205](/pic/205.png)



### 10.2.2. 工具上的操作

- **连接样机**

**① usb通信方式**

usb公头直接插入样机的usb即可

![img206](/pic/206.png)

**② 串口通信方式**

串口工具的tx/rx接样机的rx/tx，样机的tx、rx在软件配置里面默认DP为Tx，DM为RX

![img207](/pic/207.jpg)



- **打开工具配置文件**

![img208](/pic/208.png)

![img209](/pic/209.png)



- **连接样机**

![img210](/pic/210.png)

![img211](/pic/211.png)



- **进入music 调节界面**

![img212](/pic/212.png)



- **进入混响调节界面**

![img213](/pic/213.png)

![img214](/pic/214.png)



- **调好音效之后保存文件**

![img215](/pic/215.png)

![img216](/pic/216.png)



### 10.2.3. 延伸

- **调音工具珠海相关资料**

![img217](/pic/217.png)



- **某个模块开启之后很容易出现声音卡顿**

##### ① 打开实时内存打印

目的：查看是否是内存不足导致

使用mem_stats接口打印内存使用情况，一般是在开机的时候创建一个定时器任务打印。

![img218](/pic/218.png)

##### ② 把对应的功能放入RAM中

目的：提升对应功能的响应时间

原理：去掉了一个从flash中读取数据到内存的动作

```
/**
                                        695 310 SDK
 * 开启 ECHO 34.9K
 * 开启 REVERB 50K
 * bt模式链接手机 1K
 * bt模式播放音乐 6.5k
 * 播放mp3提示音3.2K 
 */
//AudioEffects代码链接管理
#define AUDIO_EFFECTS_DRC_AT_RAM            0//DRC    大概占用3.4k内存
#define AUDIO_EFFECTS_REVERB_AT_RAM         0//REVERB 混响  大概占用1.1k内存
#define AUDIO_EFFECTS_ECHO_AT_RAM           1//ECHO 回声  大概占用0.6k内存
#define AUDIO_EFFECTS_AFC_AT_RAM            1//陷波、移频 啸叫抑制  大概占用3.1k内存
#define AUDIO_EFFECTS_EQ_AT_RAM             1//EQ  大概占用3.1k内存
#define AUDIO_EFFECTS_NOISEGATE_AT_RAM      1//噪声门  大概占用0.9k内存
#define AUDIO_EFFECTS_MIC_EFFECT_AT_RAM     0//EFFECT 音效  大概占用4.7k内存
#define AUDIO_EFFECTS_MIC_STREAM_AT_RAM     1//STREAM 流  大概占用0.3k内存
/*
注意：
实际剩下超过某些功能开启的内存大小，也有可能包内存不足的断言。比如内存还剩下50K但是此时开启ECHO的混响，有很大的概率出现内存不足导致断言死机。
原因：没有足够的连续内存导致
*/
```

