<!-- docs/cpp.md -->


# 系统

## 1. 时钟驱动

AD14N / AD15N / AC104N / AD17N / AD18N / AD24N 支持动态设置系统HSB、LSB时钟，支持多种分频组合；
时钟驱动中限制着内置系统flash的spi时钟速度，SDK为兼容大多数flash，默认的spi时钟不超过60MHz；

最高系统时钟如下：

| 最高系统时钟 / CPU | AD14N / AC104N | AD15N | AD17N | AD18 |
|-------------------|----------------|-------|-------|------|
| HSB（系统时钟）    | 192MHz（超频）  | 160MHz | 160MHz | 160MHz |
| LSB               | 96MHz（超频）   | 80MHz  | 80MHz  | 96MHz |

AD14/15/17以及AC104时钟相关函数：
```
void pll_sel(u32 pll_clock, _PLL_DIV pll_div, _PLL_B_DIV pll_b_div);
int clk_get(const char *name);
```

AD18时钟相关函数：:
```
int clk_set(const char *name, int clk);
int clk_get(const char *name);
```

### 1.1. AD14N / AC104N 系统时钟超频说明

AD14N / AC104N支持最高192MHz的系统时钟，在运行大于160MHz系统时钟前需要提高系统内核电压，否则可能会导致运行异常；

支持192MHz时钟的内核电压，需要调用以下接口修改，需要在系统时钟初始化前调用：

```
VDC13_VOL_SEL(VDC13_VOL_SEL_140V);
SYSVDD_VOL_SEL(SYSVDD_VOL_SEL_129V);
```

| 系统时钟不超过 | 内核电压挡位 | 内置系统Flash | A0芯片外挂系统Flash |
|---------------|-------------|---------------|-------------------|
| 160MHz        | 默认值       | 支持          | 支持              |
| 192MHz        | 1.29V       | 支持          | 支持              |

*表 系统时钟支持情况*

### 1.2. 内置系统flash spi时钟说明

当使用A0芯片时，系统Flash需要外挂，由于Flash的型号以及性能，加上PCB布线等情况的影响，不能预测系统Flash波特率运行在超过50Mhz、甚至是到96MHZ的具体情况；在此种情况下，客户如果需要系统Flash波特率运行在超过50Mhz，需要自行评估。

| 系统Flash波特率 | 内置系统Flash | A0芯片外挂系统Flash |
|-----------------|---------------|-------------------|
| ≤ 60MHz         | 支持          | 支持              |
| 60MHz ~ 96MHz   | 支持          | 不能直接支持      |
| > 96MHz         | 不支持        | 不支持            |

*表 系统Flash波特率支持情况*

### 1.2.1. AD14N / AC104N SPI时钟限制

![本地图片](/ad14_121.png)




## 2. 内置系统flash写保护

AD14N / AC104N支持最高192MHz的系统时钟，在运行大于160MHz系统时钟前需要提高系统内核电压，否则可能会导致运行异常；

支持192MHz时钟的内核电压，需要调用以下接口修改，需要在系统时钟初始化前调用：

## 3. 中断系统

## 4. GPIO接口说明


# 设备文件编码器

## 1. 设备管理

设备管理库的目录位于include_lib/liba/dev_mg_lib.a。其中主要的函数有:
一般设备使用流程：
定义并赋值设备表；

开机调用devices_init()完成对所有设备的初始化；

调用dev_open打开参数中名字为name的设备;

对设备进行读写（dev_bulk_read/dev_bulk_write/dev_byte_read/dev_byte_write）等操作;

## 2. 文件系统管理

## 3. 解码接口

## 4. F1X格式解码流程说明

## 5. 解码接口

## 6. JL_MIO功能

# 应用流程

# 音频

# 音效算法

# 电源

# 其他